# ------------------------------------------------------------
# Firewall Bot â€“ Example Environment Configuration
# Copy this file to `.env`, update the placeholders, and NEVER
# commit secrets or production tokens to version control.
# ------------------------------------------------------------

# ------------------------------
# Core bot credentials
# ------------------------------
BOT_TOKEN=replace-with-real-telegram-token
BOT_USERNAME=YourBotUsername
BOT_OWNER_ID=0000000000

# Optional payload appended to deep-linking URLs generated by the bot.
START_PAYLOAD=fw01

# ------------------------------
# Public URLs (Mini App + invite links)
# ------------------------------
MINI_APP_URL=https://your-miniapp.example.com
CHANNEL_URL=https://t.me/your_channel
ADD_TO_GROUP_URL=https://t.me/YourBotUsername?startgroup=inpvbtn&admin=delete_messages+restrict_members+invite_users

# ------------------------------
# Backend bootstrap mode
# ------------------------------
BOT_START_MODE=webhook     # or "polling" for development

# When using webhook mode, Telegram must reach this HTTPS domain.
WEBHOOK_DOMAIN=api.your-domain.example

# HTTP path that processes Telegram webhook callbacks.
WEBHOOK_PATH=/telegram/webhook

# Secret token that Telegram will echo back with each webhook request.
BOT_WEBHOOK_SECRET=generate-a-secure-random-string

# ------------------------------
# Database configuration
# ------------------------------
DATABASE_URL=postgresql://user:password@host:5432/firewall_bot?sslmode=require
DB_USER=user
DB_PASSWORD=password
DB_NAME=firewall_bot

# ------------------------------
# Processing and rate limiting
# ------------------------------
PROCESSING_CONCURRENCY=4
PROCESSING_INTERVAL_CAP=25
PROCESSING_INTERVAL_MS=1000
PROCESSING_WARNING_THRESHOLD=3
PROCESSING_MUTE_DURATION_SECONDS=600
PROCESSING_BASE_DELAY_MS=50
PROCESSING_MAX_DELAY_MS=4000
PROCESSING_RATE_DECAY_MS=15000

# Firewall cache TTL (ms)
FIREWALL_CACHE_MS=45000

# Maximum media size (MB) accepted from group messages
MEDIA_MAX_SIZE_MB=15

# HTTP API rate limiter (ms window + max requests)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# ------------------------------
# Stars payments
# ------------------------------
STARS_CURRENCY=XTR
STARS_AUTO_CAPTURE=true

# ------------------------------
# Runtime host / port
# ------------------------------
HOST=0.0.0.0
PORT=8787

# Optional list of allowed origins for CORS (comma separated)
ALLOWED_ORIGINS=https://your-miniapp.example.com

# Maximum age (seconds) accepted for Telegram init payloads
API_INITDATA_MAX_AGE=600

# ------------------------------
# Miscellaneous
# ------------------------------
NODE_ENV=production

# Uncomment to force HTTPS on the Vite dev server
# HTTPS=true
